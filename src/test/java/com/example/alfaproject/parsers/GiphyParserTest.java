package com.example.alfaproject.parsers;

import com.fasterxml.jackson.core.JsonProcessingException;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.*;

class GiphyParserTest {

    private static GiphyParser giphyParser;

    @BeforeAll
    public static void setUp(){
        giphyParser = new GiphyParser();
    }

    @Test
    void getGiffUrl() throws JsonProcessingException {
        // given
        String jsonStr = "{\"data\":{\"type\":\"gif\",\"id\":\"348stttnH8VOBHXCeE\",\"url\":\"https://giphy.com/gifs/marenmorris-rich-maren-morris-348stttnH8VOBHXCeE\",\"slug\":\"marenmorris-rich-maren-morris-348stttnH8VOBHXCeE\",\"bitly_gif_url\":\"https://gph.is/g/Z21mx67\",\"bitly_url\":\"https://gph.is/g/Z21mx67\",\"embed_url\":\"https://giphy.com/embed/348stttnH8VOBHXCeE\",\"username\":\"marenmorris\",\"source\":\"https://www.youtube.com/watch?v=lcPh9UOhRPI\",\"title\":\"rich GIF by Maren Morris\",\"rating\":\"g\",\"content_url\":\"\",\"source_tld\":\"www.youtube.com\",\"source_post_url\":\"https://www.youtube.com/watch?v=lcPh9UOhRPI\",\"is_sticker\":0,\"import_datetime\":\"2019-05-23 15:51:46\",\"trending_datetime\":\"0000-00-00 00:00:00\",\"images\":{\"fixed_width_still\":{\"height\":\"74\",\"size\":\"7844\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/200w_s.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=200w_s.gif&ct=g\",\"width\":\"200\"},\"preview_gif\":{\"height\":\"43\",\"size\":\"48109\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy-preview.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy-preview.gif&ct=g\",\"width\":\"116\"},\"fixed_height_downsampled\":{\"height\":\"200\",\"size\":\"212726\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/200_d.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=200_d.gif&ct=g\",\"webp\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/200_d.webp?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=200_d.webp&ct=g\",\"webp_size\":\"110618\",\"width\":\"539\"},\"preview\":{\"height\":\"150\",\"mp4\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy-preview.mp4?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy-preview.mp4&ct=g\",\"mp4_size\":\"28550\",\"width\":\"404\"},\"fixed_height_small\":{\"height\":\"100\",\"mp4\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/100.mp4?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=100.mp4&ct=g\",\"mp4_size\":\"31873\",\"size\":\"240807\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/100.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=100.gif&ct=g\",\"webp\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/100.webp?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=100.webp&ct=g\",\"webp_size\":\"60324\",\"width\":\"270\"},\"downsized\":{\"height\":\"178\",\"size\":\"694761\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy.gif&ct=g\",\"width\":\"480\"},\"fixed_width_downsampled\":{\"height\":\"74\",\"size\":\"45102\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/200w_d.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=200w_d.gif&ct=g\",\"webp\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/200w_d.webp?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=200w_d.webp&ct=g\",\"webp_size\":\"22402\",\"width\":\"200\"},\"fixed_width\":{\"height\":\"74\",\"mp4\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/200w.mp4?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=200w.mp4&ct=g\",\"mp4_size\":\"21920\",\"size\":\"131510\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/200w.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=200w.gif&ct=g\",\"webp\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/200w.webp?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=200w.webp&ct=g\",\"webp_size\":\"44030\",\"width\":\"200\"},\"downsized_still\":{\"height\":\"178\",\"size\":\"694761\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy_s.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy_s.gif&ct=g\",\"width\":\"480\"},\"downsized_medium\":{\"height\":\"178\",\"size\":\"694761\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy.gif&ct=g\",\"width\":\"480\"},\"original_mp4\":{\"height\":\"178\",\"mp4\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy.mp4?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy.mp4&ct=g\",\"mp4_size\":\"68896\",\"width\":\"480\"},\"downsized_large\":{\"height\":\"178\",\"size\":\"694761\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy.gif&ct=g\",\"width\":\"480\"},\"preview_webp\":{\"height\":\"106\",\"size\":\"36214\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy-preview.webp?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy-preview.webp&ct=g\",\"width\":\"286\"},\"original\":{\"frames\":\"18\",\"hash\":\"0c3cafb0359b698937475db4d02cb207\",\"height\":\"178\",\"mp4\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy.mp4?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy.mp4&ct=g\",\"mp4_size\":\"68896\",\"size\":\"694761\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy.gif&ct=g\",\"webp\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy.webp?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy.webp&ct=g\",\"webp_size\":\"115522\",\"width\":\"480\"},\"original_still\":{\"height\":\"178\",\"size\":\"37782\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy_s.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy_s.gif&ct=g\",\"width\":\"480\"},\"fixed_height_small_still\":{\"height\":\"100\",\"size\":\"14454\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/100_s.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=100_s.gif&ct=g\",\"width\":\"270\"},\"fixed_width_small\":{\"height\":\"37\",\"mp4\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/100w.mp4?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=100w.mp4&ct=g\",\"mp4_size\":\"11061\",\"size\":\"42160\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/100w.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=100w.gif&ct=g\",\"webp\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/100w.webp?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=100w.webp&ct=g\",\"webp_size\":\"20436\",\"width\":\"100\"},\"looping\":{\"mp4\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy-loop.mp4?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy-loop.mp4&ct=g\",\"mp4_size\":\"814844\"},\"downsized_small\":{\"height\":\"178\",\"mp4\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy-downsized-small.mp4?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy-downsized-small.mp4&ct=g\",\"mp4_size\":\"68896\",\"width\":\"480\"},\"fixed_width_small_still\":{\"height\":\"37\",\"size\":\"3039\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/100w_s.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=100w_s.gif&ct=g\",\"width\":\"100\"},\"fixed_height_still\":{\"height\":\"200\",\"size\":\"29767\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/200_s.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=200_s.gif&ct=g\",\"width\":\"539\"},\"fixed_height\":{\"height\":\"200\",\"mp4\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/200.mp4?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=200.mp4&ct=g\",\"mp4_size\":\"82020\",\"size\":\"546178\",\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/200.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=200.gif&ct=g\",\"webp\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/200.webp?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=200.webp&ct=g\",\"webp_size\":\"132754\",\"width\":\"539\"},\"480w_still\":{\"url\":\"https://media1.giphy.com/media/348stttnH8VOBHXCeE/480w_s.jpg?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=480w_s.jpg&ct=g\",\"width\":\"480\",\"height\":\"178\"}},\"user\":{\"avatar_url\":\"https://media0.giphy.com/avatars/marenmorris/ou2VjKz3bRMf.jpg\",\"banner_image\":\"https://media0.giphy.com/headers/marenmorris/DiH9bghi49AV.jpg\",\"banner_url\":\"https://media0.giphy.com/headers/marenmorris/DiH9bghi49AV.jpg\",\"profile_url\":\"https://giphy.com/marenmorris/\",\"username\":\"marenmorris\",\"display_name\":\"Maren Morris\",\"description\":\"New album Humble Quest out March 25 \",\"is_verified\":true,\"website_url\":\"https://mm.lnk.to/HumbleQuestWY\",\"instagram_url\":\"https://instagram.com/marenmorris/\"}},\"meta\":{\"msg\":\"OK\",\"status\":200,\"response_id\":\"1ff8bb033ea50ccc29ecd49f3007fa7e79c42275\"}}";

        //when
        String url = giphyParser.getGiffUrl(jsonStr);

        //then
        assertEquals(url, "https://media1.giphy.com/media/348stttnH8VOBHXCeE/giphy.gif?cid=f04753971ff8bb033ea50ccc29ecd49f3007fa7e79c42275&rid=giphy.gif&ct=g");
    }
}